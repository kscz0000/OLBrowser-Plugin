<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SVG转图片转换器</title>
    <link rel="stylesheet" href="svg-converter.css">
    <link rel="stylesheet" href="../shared/language-switch.css">
    <link rel="stylesheet" href="../shared/theme-switch.css">
    <link rel="icon" type="image/png" href="../shared/favicon.png">
</head>
<body>
    <div class="container">
        <div class="page-header">
            <h1 class="page-title">SVG转图片转换器</h1>
            <p class="page-subtitle">完全离线运行，支持批量转换，保护您的数据隐私</p>
        </div>

        <div class="card-container">
            <h2 class="card-title">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01" />
                </svg>
                SVG转图片工具
            </h2>

            <div class="main-layout">
                <!-- 左侧区域：SVG上传区域、任务列表和结果展示区 -->
                <div class="left-panel">
                    <!-- 上传区域 -->
                    <div class="upload-area" id="uploadArea">
                        <svg class="upload-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
                        </svg>
                        <p class="upload-text">点击选择SVG文件或拖拽到此处</p>
                        <p class="upload-hint">支持 SVG 格式</p>
                        <input type="file" id="fileInput" accept=".svg,image/svg+xml" multiple style="display: none;">
                    </div>

                    <!-- SVG文本输入 -->
                    <div class="svg-text-section">
                        <h3 class="section-title">或粘贴SVG代码</h3>
                        <div class="input-group">
                            <textarea
                                id="svgText"
                                placeholder="在此粘贴SVG代码..."
                                class="svg-textarea"
                            ></textarea>
                            <button id="addTextTask" class="btn btn-primary add-text-btn">
                                <svg class="btn-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
                                </svg>
                                添加到任务列表
                            </button>
                        </div>
                    </div>

                    <!-- 文件列表 -->
                    <div class="file-list" id="fileList">
                        <div class="file-list-header">
                            <h3 class="section-title">任务列表 (<span id="taskCount">0</span>)</h3>
                            <button id="clearAll" class="btn btn-secondary clear-all-btn">
                                <svg class="btn-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                </svg>
                                清空全部
                            </button>
                        </div>

                        <div id="emptyState" class="empty-state">
                            <svg class="empty-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                            </svg>
                            <p class="empty-text">暂无任务</p>
                            <p class="empty-subtext">请添加SVG文件或粘贴SVG代码</p>
                        </div>

                        <div id="taskList" class="task-list"></div>

                        <div id="progressContainer" class="progress-container" style="display: none;">
                            <h3 class="section-title">转换进度</h3>
                            <div class="progress-info">
                                <span class="progress-text">正在处理: <span id="currentFile">-</span></span>
                                <span class="progress-stats"><span id="completedTasks">0</span> / <span id="totalTasks">0</span></span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                            </div>
                            <div class="progress-details">
                                <div class="progress-item">
                                    <span class="progress-label">当前任务进度:</span>
                                    <span class="progress-value" id="currentTaskProgress">0%</span>
                                </div>
                                <div class="progress-item">
                                    <span class="progress-label">总体进度:</span>
                                    <span class="progress-value" id="overallProgress">0%</span>
                                </div>
                            </div>
                        </div>

                        <div id="batchActions" class="batch-actions">
                            <button id="convertAll" class="btn btn-primary">
                                批量转换
                            </button>
                            <button id="downloadAll" class="btn btn-secondary">
                                <svg class="btn-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path>
                                </svg>
                                批量下载
                            </button>
                        </div>
                    </div>
                </div>

                <!-- 右侧区域：参数控制面板 -->
                <div class="right-panel">
                    <!-- 参数设置 -->
                    <div class="control-panel">
                        <div class="control-group">
                            <div class="control-label">
                                <span>输出格式</span>
                            </div>
                            <div class="format-selector">
                                <div class="format-option active" data-format="png">PNG</div>
                                <div class="format-option" data-format="jpeg">JPG</div>
                                <div class="format-option" data-format="mp4">MP4</div>
                                <div class="format-option" data-format="svg-animated">动态SVG</div>
                            </div>
                        </div>

                        <div class="control-group">
                            <div class="control-label">
                                <span>分辨率倍数</span>
                            </div>
                            <div class="slider-container">
                                <input type="range" min="1" max="4" value="1" class="slider" id="resolutionSlider">
                                <div class="size-presets">
                                    <button class="size-preset active" data-size="1">1x (标准)</button>
                                    <button class="size-preset" data-size="2">2x (2K)</button>
                                    <button class="size-preset" data-size="3">3x (4K)</button>
                                    <button class="size-preset" data-size="4">4x (8K)</button>
                                </div>
                            </div>
                        </div>

                        <div class="control-group" id="qualityContainer" style="display: none;">
                            <div class="control-label">
                                <span>图片质量</span>
                                <span class="control-value" id="qualityValue">9</span>/10
                            </div>
                            <div class="slider-container">
                                <input type="range" min="1" max="10" value="9" class="slider" id="qualitySlider">
                            </div>
                        </div>

                        <div class="control-group" id="frameRateContainer" style="display: none;">
                            <div class="control-label">
                                <span>帧率 (FPS)</span>
                                <span class="control-value" id="frameRateValue">30</span>
                            </div>
                            <div class="frame-rate-selector">
                                <div class="frame-rate-options" id="mp4FrameRates">
                                    <button class="frame-rate-btn" data-fps="30">30 FPS</button>
                                    <button class="frame-rate-btn" data-fps="60">60 FPS</button>
                                    <button class="frame-rate-btn" data-fps="90">90 FPS</button>
                                    <button class="frame-rate-btn" data-fps="120">120 FPS</button>
                                </div>
                                <div class="frame-rate-options" id="svgFrameRates" style="display: none;">
                                    <button class="frame-rate-btn" data-fps="30">30 FPS</button>
                                    <button class="frame-rate-btn" data-fps="40">40 FPS</button>
                                    <button class="frame-rate-btn" data-fps="60">60 FPS</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 提示消息 -->
    <div id="toastContainer"></div>

    <!-- 安全模块 -->
    <script src="../shared/svg-security.js"></script>
    <script src="../shared/file-validator.js"></script>
    <script src="../shared/resource-manager.js"></script>
    
    <!-- 功能脚本 -->
    <script src="svg-converter.js"></script>
    <script src="../shared/return-btn.js"></script>
    <script src="../shared/language-switch.js"></script>
    <script src="../shared/theme-switch.js"></script>
</body>
</html>