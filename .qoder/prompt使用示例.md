# Promptä½¿ç”¨ç¤ºä¾‹

## æ¦‚è¿°

æœ¬æ–‡æ¡£æä¾›AIç¼–ç æç¤ºè¯å·¥ç¨‹çš„å…·ä½“ä½¿ç”¨ç¤ºä¾‹ï¼Œå¸®åŠ©ç”¨æˆ·å¿«é€ŸæŒæ¡å„å±‚Promptçš„ä½¿ç”¨æ–¹æ³•å’Œæœ€ä½³å®è·µã€‚

## ä¼˜åŒ–åçš„è½¯ä»¶å¼€å‘å·¥ä½œæµ (Optimized Software Development Workflow)

è¿™æ˜¯ä¸€ä¸ªç°ä»£åŒ–ã€æ›´å®Œæ•´çš„è½¯ä»¶å¼€å‘ç”Ÿå‘½å‘¨æœŸæµç¨‹ï¼Œä»é¡¹ç›®å¯åŠ¨åˆ°åæœŸç»´æŠ¤ï¼Œç¡®ä¿äº†é¡¹ç›®çš„ç»“æ„åŒ–å’Œé«˜è´¨é‡äº¤ä»˜ã€‚

### é˜¶æ®µä¸€ï¼šé¡¹ç›®è§„åˆ’ä¸åˆå§‹åŒ– (Phase 1: Planning & Initialization)

æ­¤é˜¶æ®µä¸“æ³¨äºé¡¹ç›®çš„å‡†å¤‡å·¥ä½œï¼Œç¡®ä¿å¼€å‘å›¢é˜Ÿæœ‰æ¸…æ™°çš„ç›®æ ‡å’Œç¨³å›ºçš„åŸºç¡€ã€‚

-   **â‘  éœ€æ±‚åˆ†æ (Requirement Analysis)**
    -   `ğŸ“` ä¸äº§å“ã€ä¸šåŠ¡æ–¹æ²Ÿé€šï¼Œæ˜ç¡®åŠŸèƒ½éœ€æ±‚å’Œä¸šåŠ¡ç›®æ ‡ã€‚
-   **â‘¡ æŠ€æœ¯è®¾è®¡ (Technical Design)**
    -   `ğŸ“` è®¾è®¡ç³»ç»Ÿæ¶æ„ã€æ•°æ®åº“ç»“æ„ã€é€‰æ‹©æŠ€æœ¯æ ˆã€‚
-   **â‘¢ é¡¹ç›®ç»“æ„ç”Ÿæˆ (Generate Project Structure)**
    -   `ğŸ“` åˆå§‹åŒ–ä»£ç ä»“åº“ï¼Œåˆ›å»ºæ ‡å‡†çš„æ¨¡å—å’Œç›®å½•ç»“æ„ã€‚
-   **â‘£ é…ç½®ç¯å¢ƒ (Configure Environment)**
    -   `âš™ï¸` é…ç½®å¼€å‘ã€æµ‹è¯•å’Œç”Ÿäº§ç¯å¢ƒï¼ŒåŒ…æ‹¬ä¾èµ–åº“ã€CI/CD æµæ°´çº¿ç­‰ã€‚

### é˜¶æ®µäºŒï¼šå¼€å‘ä¸å®ç° (Phase 2: Development & Implementation)

è¿™æ˜¯æ ¸å¿ƒçš„ç¼–ç é˜¶æ®µï¼Œå›¢é˜Ÿå°†è®¾è®¡è½¬åŒ–ä¸ºå®é™…å¯ç”¨çš„è½¯ä»¶åŠŸèƒ½ã€‚

-   **â‘  æ•°æ®å±‚å¼€å‘ (Data Layer Development)**
    -   `ğŸ—„ï¸` å®ç°æ•°æ®åº“æ¨¡å‹ã€æ•°æ®è®¿é—®å¯¹è±¡ï¼ˆDAOï¼‰å’Œæ•°æ®æŒä¹…åŒ–é€»è¾‘ã€‚
-   **â‘¡ ä¸šåŠ¡é€»è¾‘å®ç° (Business Logic Implementation)**
    -   `ğŸ’¡` ç¼–å†™æ ¸å¿ƒä¸šåŠ¡ä»£ç ï¼Œå¤„ç†ä¸»è¦çš„åŠŸèƒ½é€»è¾‘ã€‚
-   **â‘¢ API æ¥å£å¼€å‘ (API Development)**
    -   `ğŸ”Œ` åˆ›å»ºå’Œå®ç°ä¾›å‰ç«¯æˆ–ç¬¬ä¸‰æ–¹æœåŠ¡è°ƒç”¨çš„ API æ¥å£ã€‚
-   **â‘£ å•å…ƒä¸é›†æˆæµ‹è¯• (Unit & Integration Testing)**
    -   `ğŸ§ª` ç¼–å†™å¹¶æ‰§è¡Œæµ‹è¯•ç”¨ä¾‹ï¼Œç¡®ä¿ä»£ç æ¨¡å—å’Œæ¨¡å—é—´åä½œçš„æ­£ç¡®æ€§ã€‚

### é˜¶æ®µä¸‰ï¼šè´¨é‡ä¿è¯ (Phase 3: Quality Assurance)

æ­¤é˜¶æ®µé€šè¿‡ä¸¥æ ¼çš„å®¡æŸ¥å’Œæµ‹è¯•ï¼Œç¡®ä¿è½¯ä»¶çš„è´¨é‡ã€ç¨³å®šæ€§å’Œå®‰å…¨æ€§ã€‚

-   **â‘  ä»£ç å®¡æŸ¥ (Code Review)**
    -   `âœ…` åŒè¡Œæˆ–æŠ€æœ¯è´Ÿè´£äººå®¡æŸ¥ä»£ç ï¼Œç¡®ä¿ä»£ç è´¨é‡ã€å¯è¯»æ€§å’Œè§„èŒƒæ€§ã€‚
-   **â‘¡ ç³»ç»Ÿæµ‹è¯• (System Testing)**
    -   `ğŸ”¬` QA å›¢é˜Ÿå¯¹æ•´ä¸ªç³»ç»Ÿè¿›è¡Œå…¨é¢çš„åŠŸèƒ½ã€æ€§èƒ½å’Œå®‰å…¨æµ‹è¯•ã€‚
-   **â‘¢ ç”¨æˆ·éªŒæ”¶æµ‹è¯• (User Acceptance Testing - UAT)**
    -   `ğŸ‘¥` é‚€è¯·æœ€ç»ˆç”¨æˆ·æˆ–äº§å“ç»ç†è¿›è¡Œæµ‹è¯•ï¼Œç¡®è®¤è½¯ä»¶æ˜¯å¦æ»¡è¶³æœ€åˆçš„éœ€æ±‚ã€‚

### é˜¶æ®µå››ï¼šéƒ¨ç½²ä¸å‘å¸ƒ (Phase 4: Deployment & Release)

å°†é€šè¿‡æµ‹è¯•çš„è½¯ä»¶éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒï¼Œä¾›æœ€ç»ˆç”¨æˆ·ä½¿ç”¨ã€‚

-   **â‘  æ„å»ºä¸æ‰“åŒ… (Build & Package)**
    -   `ğŸ“¦` å°†ä»£ç ç¼–è¯‘ã€æ‰“åŒ…æˆå¯éƒ¨ç½²çš„äº§ç‰©ã€‚
-   **â‘¡ éƒ¨ç½²è‡³ç”Ÿäº§ç¯å¢ƒ (Deploy to Production)**
    -   `ğŸš€` é€šè¿‡è‡ªåŠ¨åŒ–è„šæœ¬ï¼ˆCI/CDï¼‰å°†åº”ç”¨å‘å¸ƒåˆ°æœåŠ¡å™¨ã€‚
-   **â‘¢ å‘å¸ƒåéªŒè¯ (Post-Release Verification)**
    -   `ğŸ”` ç›‘æ§ç³»ç»Ÿæ—¥å¿—å’Œå…³é”®æŒ‡æ ‡ï¼Œç¡®ä¿çº¿ä¸ŠæœåŠ¡æ­£å¸¸è¿è¡Œã€‚

### é˜¶æ®µäº”ï¼šè¿ç»´ä¸è¿­ä»£ (Phase 5: Maintenance & Iteration)

é¡¹ç›®å‘å¸ƒåï¼Œè¿›å…¥æŒç»­çš„ç»´æŠ¤å’Œä¼˜åŒ–å‘¨æœŸã€‚

-   **â‘  ç›‘æ§ä¸å‘Šè­¦ (Monitoring & Alerting)**
    -   `ğŸ“ˆ` æŒç»­ç›‘æ§ç³»ç»Ÿæ€§èƒ½å’Œå¥åº·çŠ¶å†µï¼Œè®¾ç½®å¼‚å¸¸å‘Šè­¦ã€‚
-   **â‘¡ æ”¶é›†ç”¨æˆ·åé¦ˆ (Gather User Feedback)**
    -   `ğŸ—£ï¸` æ”¶é›†ç”¨æˆ·çš„ä½¿ç”¨åé¦ˆå’Œæ–°çš„éœ€æ±‚ã€‚
-   **â‘¢ ä¿®å¤ä¸ä¼˜åŒ– (Bug Fixing & Optimization)**
    -   `ğŸ› ï¸` ä¿®å¤çº¿ä¸Šå‘ç°çš„ Bugï¼Œå¹¶æ ¹æ®æ€§èƒ½æ•°æ®è¿›è¡Œä¼˜åŒ–ã€‚
-   **â‘£ è¿­ä»£æ–°å‘¨æœŸ (Start New Cycle)**
    -   `ğŸ”„` åŸºäºæ–°çš„éœ€æ±‚å’Œåé¦ˆï¼Œè¿”å›**é˜¶æ®µä¸€**ï¼Œå¼€å§‹æ–°çš„å¼€å‘è¿­ä»£ã€‚

## ä½¿ç”¨æµç¨‹ç¤ºä¾‹

### åœºæ™¯ï¼šå¼€å‘ä¸€ä¸ªæ–°çš„è®¢å•ç®¡ç†åŠŸèƒ½

#### æ­¥éª¤1ï¼šéœ€æ±‚åˆ†æä¸æ£€æŸ¥

**ä½¿ç”¨Prompt**: `rules/Reviewéœ€æ±‚å®ç°æ£€æŸ¥prompt.md`

```markdown
# éœ€æ±‚è§„æ ¼
å¼€å‘ä¸€ä¸ªè®¢å•ç®¡ç†åŠŸèƒ½ï¼ŒåŒ…å«ä»¥ä¸‹åŠŸèƒ½ç‚¹ï¼š
1. è®¢å•åˆ›å»ºï¼šç”¨æˆ·å¯ä»¥åˆ›å»ºæ–°è®¢å•
2. è®¢å•æŸ¥è¯¢ï¼šæ”¯æŒæŒ‰çŠ¶æ€ã€æ—¶é—´èŒƒå›´æŸ¥è¯¢è®¢å•
3. è®¢å•æ›´æ–°ï¼šæ›´æ–°è®¢å•çŠ¶æ€å’ŒåŸºæœ¬ä¿¡æ¯
4. è®¢å•åˆ é™¤ï¼šè½¯åˆ é™¤è®¢å•æ•°æ®

# æŠ€æœ¯è¦æ±‚
- ä½¿ç”¨Spring Boot + JPAæŠ€æœ¯æ ˆ
- æ”¯æŒåˆ†é¡µæŸ¥è¯¢
- éœ€è¦æ•°æ®ç¼“å­˜ä¼˜åŒ–
- æ¥å£éœ€è¦è®¤è¯æˆæƒ
```

**AIç”Ÿæˆæ£€æŸ¥æŠ¥å‘Š**:
```
æ€»ä½“è¯„åˆ†: 85/100
é€šè¿‡çŠ¶æ€: é€šè¿‡
ä¸»è¦é—®é¢˜: ç¼ºå°‘æ€§èƒ½æŒ‡æ ‡è¦æ±‚
å»ºè®®ä¼˜å…ˆçº§: ä¸­

è¯¦ç»†æ£€æŸ¥é¡¹:
âœ“ åŠŸèƒ½å®Œæ•´æ€§æ£€æŸ¥ - é€šè¿‡
âœ“ æŠ€æœ¯æ–¹æ¡ˆç¬¦åˆæ€§æ£€æŸ¥ - é€šè¿‡
âœ“ å®‰å…¨æ€§è¦æ±‚æ£€æŸ¥ - éƒ¨åˆ†é€šè¿‡
âœ— æ€§èƒ½æŒ‡æ ‡æ£€æŸ¥ - ç¼ºå°‘å…·ä½“æŒ‡æ ‡

æ”¹è¿›å»ºè®®:
1. è¡¥å……æ€§èƒ½æŒ‡æ ‡è¦æ±‚ï¼ˆQPSã€å“åº”æ—¶é—´ç­‰ï¼‰
2. æ˜ç¡®ç¼“å­˜ç­–ç•¥å’Œæ•°æ®ä¸€è‡´æ€§è¦æ±‚
3. è¡¥å……å¼‚å¸¸å¤„ç†å’Œæ•°æ®æ ¡éªŒè§„åˆ™
```

#### æ­¥éª¤2ï¼šæŠ€æœ¯æ–¹æ¡ˆè®¾è®¡

**ä½¿ç”¨Prompt**: `æŠ€æœ¯æ–¹æ¡ˆ/æ–°å¢ç±»éœ€æ±‚prompt.md`

**è¾“å…¥éœ€æ±‚**:
```yaml
ä¸šåŠ¡éœ€æ±‚:
  æ ¸å¿ƒåŠŸèƒ½:
    - è®¢å•åˆ›å»º: ç”¨æˆ·é€‰æ‹©å•†å“åˆ›å»ºè®¢å•
    - è®¢å•æŸ¥è¯¢: å¤šæ¡ä»¶åˆ†é¡µæŸ¥è¯¢
    - è®¢å•æ›´æ–°: çŠ¶æ€å˜æ›´å’ŒåŸºæœ¬ä¿¡æ¯ä¿®æ”¹
    - è®¢å•åˆ é™¤: è½¯åˆ é™¤æœºåˆ¶
    
  ä¸šåŠ¡è§„åˆ™:
    - è®¢å•çŠ¶æ€: å¾…æ”¯ä»˜ã€å·²æ”¯ä»˜ã€å·²å‘è´§ã€å·²å®Œæˆã€å·²å–æ¶ˆ
    - åº“å­˜æ ¡éªŒ: åˆ›å»ºè®¢å•æ—¶æ ¡éªŒåº“å­˜
    - é‡‘é¢è®¡ç®—: è‡ªåŠ¨è®¡ç®—è®¢å•æ€»é‡‘é¢
    - æœ‰æ•ˆæœŸ: å¾…æ”¯ä»˜è®¢å•30åˆ†é’Ÿè¿‡æœŸ
    
  æ•°æ®éœ€æ±‚:
    - è®¢å•ä¸»è¡¨: è®¢å•åŸºæœ¬ä¿¡æ¯
    - è®¢å•æ˜ç»†è¡¨: å•†å“æ˜ç»†ä¿¡æ¯
    - è®¢å•çŠ¶æ€è¡¨: çŠ¶æ€å˜æ›´å†å²
```

**AIç”ŸæˆæŠ€æœ¯æ–¹æ¡ˆ**:
```java
/**
 * è®¢å•å®ä½“è®¾è®¡
 */
@Entity
@Table(name = "t_order")
public class OrderEntity extends BaseEntity {
    
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    
    @Column(name = "order_no", unique = true, nullable = false, length = 32)
    private String orderNo;
    
    @Column(name = "user_id", nullable = false)
    private Long userId;
    
    @Column(name = "total_amount", nullable = false)
    private BigDecimal totalAmount;
    
    @Enumerated(EnumType.STRING)
    @Column(name = "order_status", nullable = false, length = 20)
    private OrderStatus status;
    
    @OneToMany(mappedBy = "order", cascade = CascadeType.ALL, fetch = FetchType.LAZY)
    private List<OrderItemEntity> items = new ArrayList<>();
    
    // ä¸šåŠ¡æ–¹æ³•
    public void createOrder(CreateOrderCommand command) {
        // ä¸šåŠ¡è§„åˆ™æ ¡éªŒ
        validateCreateCommand(command);
        
        // ç”Ÿæˆè®¢å•å·
        this.orderNo = generateOrderNo();
        this.userId = command.getUserId();
        this.status = OrderStatus.PENDING_PAYMENT;
        
        // è®¡ç®—æ€»é‡‘é¢
        this.totalAmount = calculateTotalAmount(command.getItems());
        
        // åˆ›å»ºè®¢å•æ˜ç»†
        createOrderItems(command.getItems());
        
        // å‘å¸ƒé¢†åŸŸäº‹ä»¶
        registerEvent(new OrderCreatedEvent(this.id, this.orderNo));
    }
    
    public void pay() {
        if (this.status != OrderStatus.PENDING_PAYMENT) {
            throw new BusinessException("è®¢å•çŠ¶æ€ä¸æ­£ç¡®ï¼Œæ— æ³•æ”¯ä»˜");
        }
        this.status = OrderStatus.PAID;
        this.payTime = LocalDateTime.now();
        registerEvent(new OrderPaidEvent(this.id));
    }
}
```

#### æ­¥éª¤3ï¼šä¸šåŠ¡é€»è¾‘å®ç°

**ä½¿ç”¨Prompt**: `ä¸šåŠ¡å±‚/ä¸šåŠ¡å±‚prompt.md`

**AIç”Ÿæˆä¸šåŠ¡æœåŠ¡**:
```java
/**
 * è®¢å•é¢†åŸŸæœåŠ¡
 */
@DomainService
@Slf4j
public class OrderDomainService {
    
    private final OrderRepository orderRepository;
    private final InventoryService inventoryService;
    private final EventPublisher eventPublisher;
    
    /**
     * åˆ›å»ºè®¢å•
     */
    @Transactional
    public OrderEntity createOrder(CreateOrderCommand command) {
        log.info("å¼€å§‹åˆ›å»ºè®¢å•ï¼Œç”¨æˆ·ID: {}", command.getUserId());
        
        // 1. å‚æ•°æ ¡éªŒ
        validateCreateCommand(command);
        
        // 2. åº“å­˜æ ¡éªŒ
        checkInventory(command.getItems());
        
        // 3. åˆ›å»ºè®¢å•å®ä½“
        OrderEntity order = OrderEntity.create(command);
        
        // 4. ä¿å­˜è®¢å•
        order = orderRepository.save(order);
        
        // 5. æ‰£å‡åº“å­˜
        inventoryService.deductInventory(command.getItems());
        
        // 6. å‘å¸ƒäº‹ä»¶
        eventPublisher.publish(new OrderCreatedEvent(order.getId(), order.getOrderNo()));
        
        log.info("è®¢å•åˆ›å»ºæˆåŠŸï¼Œè®¢å•å·: {}", order.getOrderNo());
        return order;
    }
    
    /**
     * è®¢å•æ”¯ä»˜
     */
    @Transactional
    public void payOrder(String orderNo) {
        OrderEntity order = orderRepository.findByOrderNo(orderNo)
            .orElseThrow(() -> new BusinessException("è®¢å•ä¸å­˜åœ¨"));
        
        order.pay();
        orderRepository.save(order);
    }
    
    private void validateCreateCommand(CreateOrderCommand command) {
        if (command.getUserId() == null) {
            throw new IllegalArgumentException("ç”¨æˆ·IDä¸èƒ½ä¸ºç©º");
        }
        if (CollectionUtils.isEmpty(command.getItems())) {
            throw new IllegalArgumentException("è®¢å•å•†å“ä¸èƒ½ä¸ºç©º");
        }
        command.getItems().forEach(this::validateOrderItem);
    }
    
    private void checkInventory(List<OrderItemDTO> items) {
        items.forEach(item -> {
            boolean hasInventory = inventoryService.checkInventory(item.getProductId(), item.getQuantity());
            if (!hasInventory) {
                throw new BusinessException("å•†å“åº“å­˜ä¸è¶³: " + item.getProductId());
            }
        });
    }
}
```

#### æ­¥éª¤4ï¼šæ¥å£å¼€å‘

**ä½¿ç”¨Prompt**: `åº”ç”¨å±‚/æ¥å£å®šä¹‰prompt.md`

**AIç”Ÿæˆæ¥å£å®šä¹‰**:
```yaml
# è®¢å•ç®¡ç†APIå®šä¹‰
apiVersion: v3
description: |
  è®¢å•ç®¡ç†æ¥å£ï¼Œæä¾›è®¢å•çš„åˆ›å»ºã€æŸ¥è¯¢ã€æ›´æ–°ã€åˆ é™¤åŠŸèƒ½
  
  ä¸šåŠ¡åœºæ™¯:
  - ç”¨æˆ·ä¸‹å•è´­ä¹°å•†å“
  - å•†å®¶ç®¡ç†è®¢å•çŠ¶æ€
  - ç³»ç»Ÿç®¡ç†å‘˜æŸ¥è¯¢è®¢å•ä¿¡æ¯
  
  ä½¿ç”¨çº¦æŸ:
  - éœ€è¦ç”¨æˆ·è®¤è¯
  - æ“ä½œéœ€è¦ç›¸åº”æƒé™
  - æ¥å£æœ‰é¢‘ç‡é™åˆ¶

paths:
  /api/v1/orders:
    post:
      summary: åˆ›å»ºè®¢å•
      description: ç”¨æˆ·åˆ›å»ºæ–°è®¢å•ï¼Œéœ€è¦é€‰æ‹©å•†å“å’Œå¡«å†™æ”¶è´§ä¿¡æ¯
      tags:
        - è®¢å•ç®¡ç†
      security:
        - bearerAuth: []
      requestBody:
        description: è®¢å•åˆ›å»ºè¯·æ±‚
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateOrderRequest'
      responses:
        '200':
          description: è®¢å•åˆ›å»ºæˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrderResponse'
        '400':
          description: è¯·æ±‚å‚æ•°é”™è¯¯
        '409':
          description: å•†å“åº“å­˜ä¸è¶³

    get:
      summary: åˆ†é¡µæŸ¥è¯¢è®¢å•
      description: æ”¯æŒå¤šæ¡ä»¶åˆ†é¡µæŸ¥è¯¢è®¢å•åˆ—è¡¨
      tags:
        - è®¢å•ç®¡ç†
      security:
        - bearerAuth: []
      parameters:
        - name: status
          in: query
          description: è®¢å•çŠ¶æ€
          schema:
            type: string
            enum: [PENDING_PAYMENT, PAID, SHIPPED, COMPLETED, CANCELLED]
        - name: startTime
          in: query
          description: å¼€å§‹æ—¶é—´
          schema:
            type: string
            format: date-time
        - name: endTime
          in: query
          description: ç»“æŸæ—¶é—´
          schema:
            type: string
            format: date-time
        - name: page
          in: query
          description: é¡µç ï¼Œä»1å¼€å§‹
          schema:
            type: integer
            minimum: 1
            default: 1
        - name: size
          in: query
          description: æ¯é¡µå¤§å°
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
      responses:
        '200':
          description: æŸ¥è¯¢æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PageResultOrderResponse'

components:
  schemas:
    CreateOrderRequest:
      type: object
      description: åˆ›å»ºè®¢å•è¯·æ±‚
      properties:
        items:
          type: array
          description: è®¢å•å•†å“åˆ—è¡¨
          items:
            $ref: '#/components/schemas/OrderItemRequest'
        shippingAddress:
          $ref: '#/components/schemas/ShippingAddress'
      required:
        - items
        - shippingAddress

    OrderResponse:
      type: object
      description: è®¢å•å“åº”
      properties:
        id:
          type: integer
          description: è®¢å•ID
        orderNo:
          type: string
          description: è®¢å•å·
        status:
          type: string
          description: è®¢å•çŠ¶æ€
        totalAmount:
          type: number
          description: è®¢å•æ€»é‡‘é¢
        items:
          type: array
          description: è®¢å•å•†å“åˆ—è¡¨
          items:
            $ref: '#/components/schemas/OrderItemResponse'
```

**ä½¿ç”¨Prompt**: `åº”ç”¨å±‚/æ¥å£å®ç°prompt.md`

**AIç”Ÿæˆæ¥å£å®ç°**:
```java
/**
 * è®¢å•ç®¡ç†æ¥å£å®ç°
 */
@RestController
@RequestMapping("/api/v1/orders")
@Tag(name = "è®¢å•ç®¡ç†", description = "è®¢å•ç®¡ç†ç›¸å…³æ¥å£")
@Validated
@Slf4j
public class OrderController {
    
    private final OrderApplicationService applicationService;
    private final OrderAssembler assembler;
    
    /**
     * åˆ›å»ºè®¢å•
     */
    @PostMapping
    @Operation(summary = "åˆ›å»ºè®¢å•")
    @ApiResponses({
        @ApiResponse(responseCode = "200", description = "è®¢å•åˆ›å»ºæˆåŠŸ"),
        @ApiResponse(responseCode = "400", description = "è¯·æ±‚å‚æ•°é”™è¯¯"),
        @ApiResponse(responseCode = "409", description = "å•†å“åº“å­˜ä¸è¶³")
    })
    @PreAuthorize("hasRole('USER')")
    public ResponseEntity<ApiResponse<OrderResponse>> createOrder(
            @Valid @RequestBody CreateOrderRequest request,
            @AuthenticationPrincipal UserDetails userDetails) {
        
        try {
            // 1. å‚æ•°è½¬æ¢
            CreateOrderCommand command = assembler.toCommand(request, userDetails.getUserId());
            
            // 2. è°ƒç”¨åº”ç”¨æœåŠ¡
            OrderDTO order = applicationService.createOrder(command);
            
            // 3. è¿”å›ç»“æœ
            OrderResponse response = assembler.toResponse(order);
            
            return ResponseEntity.ok(ApiResponse.success(response));
            
        } catch (BusinessException e) {
            return ResponseEntity.status(HttpStatus.CONFLICT)
                .body(ApiResponse.error(e.getCode(), e.getMessage()));
        }
    }
    
    /**
     * åˆ†é¡µæŸ¥è¯¢è®¢å•
     */
    @GetMapping
    @Operation(summary = "åˆ†é¡µæŸ¥è¯¢è®¢å•")
    @PreAuthorize("hasRole('USER')")
    public ResponseEntity<ApiResponse<PageResult<OrderResponse>>> findOrders(
            @RequestParam(required = false) OrderStatus status,
            @RequestParam(required = false) @DateTimeFormat(pattern = "yyyy-MM-dd HH:mm:ss") LocalDateTime startTime,
            @RequestParam(required = false) @DateTimeFormat(pattern = "yyyy-MM-dd HH:mm:ss") LocalDateTime endTime,
            @RequestParam(defaultValue = "1") @Min(1) Integer page,
            @RequestParam(defaultValue = "20") @Min(1) @Max(100) Integer size,
            @AuthenticationPrincipal UserDetails userDetails) {
        
        OrderQuery query = OrderQuery.builder()
            .userId(userDetails.getUserId())
            .status(status)
            .startTime(startTime)
            .endTime(endTime)
            .page(page)
            .size(size)
            .build();
        
        PageResult<OrderDTO> pageResult = applicationService.findOrders(query);
        PageResult<OrderResponse> response = assembler.toPageResponse(pageResult);
        
        return ResponseEntity.ok(ApiResponse.success(response));
    }
}
```

#### æ­¥éª¤5ï¼šæ•°æ®å±‚å¼€å‘

**ä½¿ç”¨Prompt**: `æ•°æ®å±‚/å»ºè¡¨prompt.md`

**AIç”Ÿæˆæ•°æ®åº“è®¾è®¡**:
```sql
-- è®¢å•ä¸»è¡¨
CREATE TABLE t_order (
    id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT 'è®¢å•ID',
    order_no VARCHAR(32) NOT NULL UNIQUE COMMENT 'è®¢å•å·',
    user_id BIGINT NOT NULL COMMENT 'ç”¨æˆ·ID',
    total_amount DECIMAL(10,2) NOT NULL COMMENT 'è®¢å•æ€»é‡‘é¢',
    order_status VARCHAR(20) NOT NULL DEFAULT 'PENDING_PAYMENT' COMMENT 'è®¢å•çŠ¶æ€',
    pay_status VARCHAR(20) NOT NULL DEFAULT 'UNPAID' COMMENT 'æ”¯ä»˜çŠ¶æ€',
    ship_status VARCHAR(20) NOT NULL DEFAULT 'UNSHIPPED' COMMENT 'å‘è´§çŠ¶æ€',
    
    -- æ—¶é—´ä¿¡æ¯
    order_time DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'ä¸‹å•æ—¶é—´',
    pay_time DATETIME COMMENT 'æ”¯ä»˜æ—¶é—´',
    ship_time DATETIME COMMENT 'å‘è´§æ—¶é—´',
    receive_time DATETIME COMMENT 'æ”¶è´§æ—¶é—´',
    cancel_time DATETIME COMMENT 'å–æ¶ˆæ—¶é—´',
    
    -- å®¡è®¡å­—æ®µ
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
    created_by VARCHAR(50) NOT NULL COMMENT 'åˆ›å»ºäºº',
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
    updated_by VARCHAR(50) NOT NULL COMMENT 'æ›´æ–°äºº',
    deleted TINYINT NOT NULL DEFAULT 0 COMMENT 'åˆ é™¤æ ‡è®°',
    deleted_at DATETIME COMMENT 'åˆ é™¤æ—¶é—´',
    deleted_by VARCHAR(50) COMMENT 'åˆ é™¤äºº',
    
    -- ç´¢å¼•è®¾è®¡
    INDEX idx_order_no (order_no),
    INDEX idx_user_id (user_id),
    INDEX idx_order_status (order_status),
    INDEX idx_pay_status (pay_status),
    INDEX idx_order_time (order_time),
    INDEX idx_created_at (created_at),
    INDEX idx_deleted (deleted),
    
    -- å¤åˆç´¢å¼•
    INDEX idx_user_status (user_id, order_status),
    INDEX idx_status_time (order_status, order_time),
    
    -- å¤–é”®çº¦æŸ
    CONSTRAINT fk_order_user FOREIGN KEY (user_id) REFERENCES t_user(id)
    
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='è®¢å•ä¸»è¡¨';

-- è®¢å•æ˜ç»†è¡¨
CREATE TABLE t_order_item (
    id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT 'æ˜ç»†ID',
    order_id BIGINT NOT NULL COMMENT 'è®¢å•ID',
    product_id BIGINT NOT NULL COMMENT 'å•†å“ID',
    product_name VARCHAR(200) NOT NULL COMMENT 'å•†å“åç§°',
    product_sku VARCHAR(50) COMMENT 'å•†å“SKU',
    unit_price DECIMAL(10,2) NOT NULL COMMENT 'å•ä»·',
    quantity INT NOT NULL DEFAULT 1 COMMENT 'æ•°é‡',
    total_amount DECIMAL(10,2) NOT NULL COMMENT 'å°è®¡é‡‘é¢',
    
    -- å•†å“å±æ€§
    product_attrs JSON COMMENT 'å•†å“å±æ€§',
    product_image VARCHAR(500) COMMENT 'å•†å“å›¾ç‰‡',
    
    -- å®¡è®¡å­—æ®µ
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
    created_by VARCHAR(50) NOT NULL COMMENT 'åˆ›å»ºäºº',
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
    updated_by VARCHAR(50) NOT NULL COMMENT 'æ›´æ–°äºº',
    deleted TINYINT NOT NULL DEFAULT 0 COMMENT 'åˆ é™¤æ ‡è®°',
    
    -- ç´¢å¼•è®¾è®¡
    INDEX idx_order_id (order_id),
    INDEX idx_product_id (product_id),
    INDEX idx_product_sku (product_sku),
    INDEX idx_created_at (created_at),
    INDEX idx_deleted (deleted),
    
    -- å¤åˆç´¢å¼•
    INDEX idx_order_product (order_id, product_id),
    
    -- å¤–é”®çº¦æŸ
    CONSTRAINT fk_order_item_order FOREIGN KEY (order_id) REFERENCES t_order(id) ON DELETE CASCADE,
    CONSTRAINT fk_order_item_product FOREIGN KEY (product_id) REFERENCES t_product(id)
    
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='è®¢å•æ˜ç»†è¡¨';
```

**ä½¿ç”¨Prompt**: `æ•°æ®å±‚/æŒä¹…åŒ–prompt.md`

**AIç”Ÿæˆæ•°æ®è®¿é—®å±‚**:
```java
/**
 * è®¢å•ä»“åº“æ¥å£
 */
@Repository
public interface OrderRepository extends JpaRepository<OrderEntity, Long>, JpaSpecificationExecutor<OrderEntity> {
    
    /**
     * æ ¹æ®è®¢å•å·æŸ¥è¯¢
     */
    Optional<OrderEntity> findByOrderNo(String orderNo);
    
    /**
     * æ ¹æ®ç”¨æˆ·IDå’Œè®¢å•çŠ¶æ€æŸ¥è¯¢
     */
    Page<OrderEntity> findByUserIdAndStatus(Long userId, OrderStatus status, Pageable pageable);
    
    /**
     * æ ¹æ®åˆ›å»ºæ—¶é—´èŒƒå›´æŸ¥è¯¢
     */
    @Query("SELECT o FROM OrderEntity o WHERE o.createdAt BETWEEN :startTime AND :endTime")
    List<OrderEntity> findByCreatedAtBetween(@Param("startTime") LocalDateTime startTime, 
                                           @Param("endTime") LocalDateTime endTime);
    
    /**
     * ç»Ÿè®¡ç”¨æˆ·è®¢å•æ•°é‡
     */
    @Query("SELECT COUNT(o) FROM OrderEntity o WHERE o.userId = :userId AND o.deleted = false")
    long countByUserId(@Param("userId") Long userId);
    
    /**
     * æ›´æ–°è®¢å•çŠ¶æ€
     */
    @Modifying
    @Query("UPDATE OrderEntity o SET o.status = :status, o.updatedAt = CURRENT_TIMESTAMP WHERE o.orderNo = :orderNo")
    int updateStatusByOrderNo(@Param("orderNo") String orderNo, @Param("status") OrderStatus status);
}
```

## é«˜çº§ä½¿ç”¨æŠ€å·§

### 1. Promptç»„åˆä½¿ç”¨

åœ¨å®é™…å¼€å‘ä¸­ï¼Œå¾€å¾€éœ€è¦å¤šä¸ªPromptååŒå·¥ä½œï¼š

```bash
# å®Œæ•´çš„åŠŸèƒ½å¼€å‘æµç¨‹
1. éœ€æ±‚åˆ†æ â†’ rules/Reviewéœ€æ±‚å®ç°æ£€æŸ¥prompt.md
2. æŠ€æœ¯æ–¹æ¡ˆ â†’ æŠ€æœ¯æ–¹æ¡ˆ/æ–°å¢ç±»éœ€æ±‚prompt.md  
3. ä¸šåŠ¡é€»è¾‘ â†’ ä¸šåŠ¡å±‚/ä¸šåŠ¡å±‚prompt.md
4. æ¥å£å¼€å‘ â†’ åº”ç”¨å±‚/æ¥å£å®šä¹‰prompt.md + æ¥å£å®ç°prompt.md
5. æ•°æ®å±‚ â†’ æ•°æ®å±‚/å»ºè¡¨prompt.md + æŒä¹…åŒ–prompt.md
6. è´¨é‡æ£€æŸ¥ â†’ rules/Reviewéœ€æ±‚å®ç°æ£€æŸ¥prompt.md
```

### 2. å‚æ•°åŒ–é…ç½®

æ ¹æ®ä¸åŒé¡¹ç›®éœ€æ±‚è°ƒæ•´Promptå‚æ•°ï¼š

```yaml
# é¡¹ç›®ç‰¹å®šé…ç½®
project:
  name: e-commerce-order
  package: com.example.order
  database: mysql
  cache: redis
  
# æŠ€æœ¯æ ˆé…ç½®  
tech-stack:
  framework: spring-boot
  version: 2.7.12
  java-version: 11
  
# æ€§èƒ½è¦æ±‚
performance:
  qps: 1000
  response-time: 100ms
  concurrent-users: 10000
```

### 3. è‡ªå®šä¹‰æ‰©å±•

åŸºäºæ ‡å‡†Promptæ¨¡æ¿è¿›è¡Œé¡¹ç›®ç‰¹å®šæ‰©å±•ï¼š

```java
/**
 * é¡¹ç›®ç‰¹å®šçš„ä¸šåŠ¡é€»è¾‘æ‰©å±•
 */
@DomainService
public class CustomOrderService extends OrderDomainService {
    
    // é¡¹ç›®ç‰¹å®šçš„ä¸šåŠ¡è§„åˆ™
    @Override
    protected void validateBusinessRules(CreateOrderCommand command) {
        super.validateBusinessRules(command);
        
        // é¡¹ç›®ç‰¹å®šçš„æ ¡éªŒé€»è¾‘
        if (command.getItems().size() > 10) {
            throw new BusinessException("å•ç¬”è®¢å•å•†å“æ•°é‡ä¸èƒ½è¶…è¿‡10ä¸ª");
        }
    }
    
    // é¡¹ç›®ç‰¹å®šçš„ç§¯åˆ†è®¡ç®—
    private void calculateMemberPoints(OrderEntity order) {
        // æ ¹æ®è®¢å•é‡‘é¢è®¡ç®—ç§¯åˆ†
        int points = order.getTotalAmount().multiply(new BigDecimal("10")).intValue();
        memberPointService.addPoints(order.getUserId(), points);
    }
}
```

### 4. å›¢é˜Ÿåä½œæ¨¡å¼

```bash
# å›¢é˜Ÿå…±äº«Promptåº“
â”œâ”€â”€ team-prompts/
â”‚   â”œâ”€â”€ common/           # é€šç”¨Promptæ¨¡æ¿
â”‚   â”œâ”€â”€ project-a/        # é¡¹ç›®Aç‰¹å®šPrompt
â”‚   â”œâ”€â”€ project-b/        # é¡¹ç›®Bç‰¹å®šPrompt
â”‚   â””â”€â”€ best-practices/   # æœ€ä½³å®è·µæ€»ç»“

# ç‰ˆæœ¬ç®¡ç†ç­–ç•¥
git branch feature/order-management
git add prompt-templates/
git commit -m "feat: æ·»åŠ è®¢å•ç®¡ç†åŠŸèƒ½Promptæ¨¡æ¿"
git push origin feature/order-management
```

## å‰ç«¯å¼€å‘ç¤ºä¾‹

### åœºæ™¯ï¼šå¼€å‘ä¸€ä¸ªå•†å“åˆ—è¡¨ç»„ä»¶

#### æ­¥éª¤1ï¼šå‰ç«¯å·¥ç¨‹ç»“æ„è®¾è®¡

**ä½¿ç”¨Prompt**: `å‰ç«¯/å‰ç«¯å·¥ç¨‹ç»“æ„prompt.md`

**è¾“å…¥éœ€æ±‚**: 
```yaml
é¡¹ç›®åç§°: e-commerce-frontend
æŠ€æœ¯æ ˆ: Vue 3 + TypeScript + Vite 5 + Pinia + Ant Design Vue 4.X
é¡¹ç›®ç±»å‹: å•é¡µé¢åº”ç”¨(SPA)
åŠŸèƒ½æ¨¡å—: 
  - å•†å“ç®¡ç†
  - è®¢å•ç®¡ç†
  - ç”¨æˆ·ä¸­å¿ƒ
```

**AIç”Ÿæˆå‰ç«¯é¡¹ç›®ç»“æ„**: 
```
e-commerce-frontend/
â”œâ”€â”€ public/                    # é™æ€èµ„æº
â”œâ”€â”€ src/                       # æºä»£ç 
â”‚   â”œâ”€â”€ api/                   # APIæœåŠ¡
â”‚   â”‚   â”œâ”€â”€ product.ts         # å•†å“API
â”‚   â”‚   â””â”€â”€ index.ts           # APIå…¥å£
â”‚   â”œâ”€â”€ components/            # ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ common/            # é€šç”¨ç»„ä»¶
â”‚   â”‚   â””â”€â”€ product/           # å•†å“ç›¸å…³ç»„ä»¶
â”‚   â”œâ”€â”€ composables/           # ç»„åˆå¼å‡½æ•°
â”‚   â”œâ”€â”€ layouts/               # å¸ƒå±€ç»„ä»¶
â”‚   â”œâ”€â”€ pages/                 # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ product/           # å•†å“é¡µé¢
â”‚   â”‚   â”œâ”€â”€ order/             # è®¢å•é¡µé¢
â”‚   â”‚   â””â”€â”€ user/              # ç”¨æˆ·é¡µé¢
â”‚   â”œâ”€â”€ router/                # è·¯ç”±é…ç½®
â”‚   â”œâ”€â”€ stores/                # PiniaçŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ product.ts         # å•†å“çŠ¶æ€
â”‚   â”‚   â””â”€â”€ user.ts            # ç”¨æˆ·çŠ¶æ€
â”‚   â”œâ”€â”€ styles/                # æ ·å¼æ–‡ä»¶
â”‚   â”œâ”€â”€ types/                 # TypeScriptç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ utils/                 # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ App.vue                # æ ¹ç»„ä»¶
â”‚   â”œâ”€â”€ main.ts                # å…¥å£æ–‡ä»¶
â”‚   â””â”€â”€ vite-env.d.ts          # Viteç¯å¢ƒç±»å‹
â”œâ”€â”€ .eslintrc.js               # ESLinté…ç½®
â”œâ”€â”€ .prettierrc.js             # Prettieré…ç½®
â”œâ”€â”€ index.html                 # HTMLæ¨¡æ¿
â”œâ”€â”€ package.json               # é¡¹ç›®ä¾èµ–
â”œâ”€â”€ tsconfig.json              # TypeScripté…ç½®
â””â”€â”€ vite.config.ts             # Viteé…ç½®
```

#### æ­¥éª¤2ï¼šå‰ç«¯ç»„ä»¶å¼€å‘

**ä½¿ç”¨Prompt**: `å‰ç«¯/å‰ç«¯ç»„ä»¶å¼€å‘prompt.md`

**è¾“å…¥éœ€æ±‚**: 
```yaml
ç»„ä»¶åç§°: ProductList
ç»„ä»¶ç±»å‹: ä¸šåŠ¡ç»„ä»¶
åŠŸèƒ½éœ€æ±‚: 
  - å•†å“åˆ—è¡¨å±•ç¤º
  - åˆ†é¡µåŠŸèƒ½
  - ç­›é€‰åŠŸèƒ½
  - æ’åºåŠŸèƒ½
  - å•†å“å¡ç‰‡ç‚¹å‡»äº‹ä»¶
æŠ€æœ¯æ ˆ: Vue 3 + TypeScript + Ant Design Vue 4.X
```

**AIç”Ÿæˆå•†å“åˆ—è¡¨ç»„ä»¶**: 
```vue
<template>
  <div class="product-list">
    <!-- ç­›é€‰å’Œæ’åºåŒºåŸŸ -->
    <div class="product-list__header">
      <a-row :gutter="[16, 16]">
        <a-col :span="8">
          <a-input
            v-model:value="searchKeyword"
            placeholder="æœç´¢å•†å“åç§°"
            allow-clear
            @change="handleSearch"
          >
            <template #prefix>
              <SearchOutlined />
            </template>
          </a-input>
        </a-col>
        <a-col :span="8">
          <a-select
            v-model:value="sortBy"
            placeholder="æ’åºæ–¹å¼"
            @change="handleSort"
          >
            <a-select-option value="price-asc">ä»·æ ¼ä»ä½åˆ°é«˜</a-select-option>
            <a-select-option value="price-desc">ä»·æ ¼ä»é«˜åˆ°ä½</a-select-option>
            <a-select-option value="sales-desc">é”€é‡ä»é«˜åˆ°ä½</a-select-option>
          </a-select>
        </a-col>
        <a-col :span="8">
          <a-select
            v-model:value="categoryId"
            placeholder="å•†å“åˆ†ç±»"
            allow-clear
            @change="handleCategoryChange"
          >
            <a-select-option value="">å…¨éƒ¨åˆ†ç±»</a-select-option>
            <a-select-option v-for="category in categories" :key="category.id" :value="category.id">
              {{ category.name }}
            </a-select-option>
          </a-select>
        </a-col>
      </a-row>
    </div>

    <!-- å•†å“åˆ—è¡¨åŒºåŸŸ -->
    <div class="product-list__content">
      <a-row :gutter="[16, 16]">
        <a-col :xs="24" :sm="12" :md="8" :lg="6" v-for="product in products" :key="product.id">
          <a-card :hoverable="true" :cover="<img alt=\"product\" :src=\"product.imageUrl\" />" @click="handleProductClick(product)">
            <template #title>
              <div class="product-title">{{ product.name }}</div>
            </template>
            <template #meta>
              <a-rate :value="product.rating" disabled />
            </template>
            <div class="product-price">Â¥{{ product.price.toFixed(2) }}</div>
            <div class="product-sales">é”€é‡: {{ product.sales }}</div>
          </a-card>
        </a-col>
      </a-row>
    </div>

    <!-- åˆ†é¡µåŒºåŸŸ -->
    <div class="product-list__footer">
      <a-pagination
        v-model:current="currentPage"
        :page-size="pageSize"
        :total="total"
        @change="handlePageChange"
        show-size-changer
        :page-size-options="['12', '24', '36', '48']"
        show-total="(total) => `å…± ${total} ä»¶å•†å“`"
      />
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref, onMounted } from 'vue'
import { SearchOutlined } from '@ant-design/icons-vue'
import type { Product, Category } from '@/types'
import { useProductStore } from '@/stores/product'

// Props
interface Props {
  initialCategoryId?: string
}

const props = withDefaults(defineProps<Props>(), {
  initialCategoryId: ''
})

// Emits
const emit = defineEmits<{
  (e: 'productClick', product: Product): void
  (e: 'update:loading', loading: boolean): void
}>()

// Store
const productStore = useProductStore()

// State
const searchKeyword = ref('')
const sortBy = ref('')
const categoryId = ref(props.initialCategoryId)
const currentPage = ref(1)
const pageSize = ref(12)
const total = ref(0)
const products = ref<Product[]>([])
const categories = ref<Category[]>([])
const loading = ref(false)

// Methods
const fetchProducts = async () => {
  loading.value = true
  emit('update:loading', true)
  try {
    const result = await productStore.getProductList({
      keyword: searchKeyword.value,
      categoryId: categoryId.value,
      sortBy: sortBy.value,
      page: currentPage.value,
      pageSize: pageSize.value
    })
    products.value = result.list
    total.value = result.total
  } catch (error) {
    console.error('Failed to fetch products:', error)
  } finally {
    loading.value = false
    emit('update:loading', false)
  }
}

const fetchCategories = async () => {
  try {
    categories.value = await productStore.getCategories()
  } catch (error) {
    console.error('Failed to fetch categories:', error)
  }
}

const handleSearch = () => {
  currentPage.value = 1
  fetchProducts()
}

const handleSort = () => {
  currentPage.value = 1
  fetchProducts()
}

const handleCategoryChange = () => {
  currentPage.value = 1
  fetchProducts()
}

const handlePageChange = (page: number, size: number) => {
  currentPage.value = page
  pageSize.value = size
  fetchProducts()
}

const handleProductClick = (product: Product) => {
  emit('productClick', product)
}

// Lifecycle
onMounted(() => {
  fetchCategories()
  fetchProducts()
})
</script>

<style scoped lang="scss">
.product-list {
  &__header {
    margin-bottom: 20px;
    padding: 16px;
    background-color: #fff;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  }

  &__content {
    margin-bottom: 20px;
  }

  &__footer {
    display: flex;
    justify-content: center;
    padding: 16px;
    background-color: #fff;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  }
}

.product-title {
  font-size: 14px;
  font-weight: 500;
  margin-bottom: 8px;
  overflow: hidden;
  text-overflow: ellipsis;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
}

.product-price {
  font-size: 18px;
  font-weight: bold;
  color: #ff4d4f;
  margin: 8px 0;
}

.product-sales {
  font-size: 12px;
  color: #8c8c8c;
}
</style>
```

#### æ­¥éª¤3ï¼šå‰ç«¯çŠ¶æ€ç®¡ç†

**ä½¿ç”¨Prompt**: `å‰ç«¯/å‰ç«¯çŠ¶æ€ç®¡ç†prompt.md`

**è¾“å…¥éœ€æ±‚**: 
```yaml
æ¨¡å—åç§°: product
åŠŸèƒ½éœ€æ±‚: 
  - å•†å“åˆ—è¡¨ç®¡ç†
  - å•†å“è¯¦æƒ…ç®¡ç†
  - å•†å“åˆ†ç±»ç®¡ç†
æŠ€æœ¯æ ˆ: Vue 3 + TypeScript + Pinia
```

**AIç”Ÿæˆå•†å“çŠ¶æ€ç®¡ç†**: 
```typescript
// stores/product.ts
import { defineStore } from 'pinia'
import { ref, computed } from 'vue'
import type { Product, Category, ProductListParams, ProductListResult } from '@/types'
import { productApi } from '@/api'

export const useProductStore = defineStore('product', () => {
  // State
  const products = ref<Product[]>([])
  const categories = ref<Category[]>([])
  const currentProduct = ref<Product | null>(null)
  const loading = ref(false)
  const error = ref<string | null>(null)

  // Getters
  const getProductById = computed(() => (id: string) => {
    return products.value.find(product => product.id === id) || null
  })

  // Actions
  async function getProductList(params: ProductListParams): Promise<ProductListResult> {
    loading.value = true
    error.value = null
    try {
      const result = await productApi.getProductList(params)
      products.value = result.list
      return result
    } catch (err) {
      error.value = err instanceof Error ? err.message : 'Failed to fetch products'
      return { list: [], total: 0 }
    } finally {
      loading.value = false
    }
  }

  async function getProductById(id: string): Promise<Product | null> {
    loading.value = true
    error.value = null
    try {
      const product = await productApi.getProductById(id)
      currentProduct.value = product
      return product
    } catch (err) {
      error.value = err instanceof Error ? err.message : 'Failed to fetch product'
      return null
    } finally {
      loading.value = false
    }
  }

  async function getCategories(): Promise<Category[]> {
    if (categories.value.length > 0) {
      return categories.value
    }
    
    loading.value = true
    error.value = null
    try {
      const result = await productApi.getCategories()
      categories.value = result
      return result
    } catch (err) {
      error.value = err instanceof Error ? err.message : 'Failed to fetch categories'
      return []
    } finally {
      loading.value = false
    }
  }

  async function createProduct(product: Omit<Product, 'id' | 'createdAt' | 'updatedAt'>): Promise<Product | null> {
    loading.value = true
    error.value = null
    try {
      const result = await productApi.createProduct(product)
      products.value.unshift(result)
      return result
    } catch (err) {
      error.value = err instanceof Error ? err.message : 'Failed to create product'
      return null
    } finally {
      loading.value = false
    }
  }

  async function updateProduct(id: string, product: Partial<Product>): Promise<Product | null> {
    loading.value = true
    error.value = null
    try {
      const result = await productApi.updateProduct(id, product)
      const index = products.value.findIndex(p => p.id === id)
      if (index !== -1) {
        products.value[index] = { ...products.value[index], ...result }
      }
      if (currentProduct.value?.id === id) {
        currentProduct.value = { ...currentProduct.value, ...result }
      }
      return result
    } catch (err) {
      error.value = err instanceof Error ? err.message : 'Failed to update product'
      return null
    } finally {
      loading.value = false
    }
  }

  async function deleteProduct(id: string): Promise<boolean> {
    loading.value = true
    error.value = null
    try {
      await productApi.deleteProduct(id)
      products.value = products.value.filter(p => p.id !== id)
      if (currentProduct.value?.id === id) {
        currentProduct.value = null
      }
      return true
    } catch (err) {
      error.value = err instanceof Error ? err.message : 'Failed to delete product'
      return false
    } finally {
      loading.value = false
    }
  }

  return {
    // State
    products,
    categories,
    currentProduct,
    loading,
    error,
    // Getters
    getProductById,
    // Actions
    getProductList,
    getProductById,
    getCategories,
    createProduct,
    updateProduct,
    deleteProduct
  }
})
```

## ç§»åŠ¨ç«¯å¼€å‘ç¤ºä¾‹

### åœºæ™¯ï¼šå¼€å‘ä¸€ä¸ªç§»åŠ¨ç«¯å•†å“è¯¦æƒ…é¡µ

#### æ­¥éª¤1ï¼šç§»åŠ¨ç«¯å·¥ç¨‹ç»“æ„è®¾è®¡

**ä½¿ç”¨Prompt**: `ç§»åŠ¨ç«¯/ç§»åŠ¨ç«¯å·¥ç¨‹ç»“æ„prompt.md`

**è¾“å…¥éœ€æ±‚**: 
```yaml
é¡¹ç›®åç§°: e-commerce-mobile
æŠ€æœ¯æ ˆ: uni-app (Vue 3) + TypeScript + uni-ui
é¡¹ç›®ç±»å‹: è·¨å¹³å°åº”ç”¨(APPã€å°ç¨‹åºã€H5)
åŠŸèƒ½æ¨¡å—: 
  - å•†å“æµè§ˆ
  - è´­ç‰©è½¦
  - è®¢å•ç®¡ç†
  - ç”¨æˆ·ä¸­å¿ƒ
```

**AIç”Ÿæˆç§»åŠ¨ç«¯é¡¹ç›®ç»“æ„**: 
```
e-commerce-mobile/
â”œâ”€â”€ components/                # ç»„ä»¶
â”‚   â”œâ”€â”€ common/                # é€šç”¨ç»„ä»¶
â”‚   â””â”€â”€ product/               # å•†å“ç›¸å…³ç»„ä»¶
â”œâ”€â”€ pages/                     # é¡µé¢
â”‚   â”œâ”€â”€ index/                 # é¦–é¡µ
â”‚   â”œâ”€â”€ product/               # å•†å“é¡µé¢
â”‚   â”œâ”€â”€ cart/                  # è´­ç‰©è½¦é¡µé¢
â”‚   â”œâ”€â”€ order/                 # è®¢å•é¡µé¢
â”‚   â””â”€â”€ user/                  # ç”¨æˆ·é¡µé¢
â”œâ”€â”€ services/                  # APIæœåŠ¡
â”‚   â”œâ”€â”€ product.ts             # å•†å“API
â”‚   â””â”€â”€ user.ts                # ç”¨æˆ·API
â”œâ”€â”€ stores/                    # çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ product.ts             # å•†å“çŠ¶æ€
â”‚   â””â”€â”€ cart.ts                # è´­ç‰©è½¦çŠ¶æ€
â”œâ”€â”€ static/                    # é™æ€èµ„æº
â”œâ”€â”€ styles/                    # æ ·å¼æ–‡ä»¶
â”œâ”€â”€ types/                     # TypeScriptç±»å‹å®šä¹‰
â”œâ”€â”€ utils/                     # å·¥å…·å‡½æ•°
â”œâ”€â”€ App.vue                    # æ ¹ç»„ä»¶
â”œâ”€â”€ main.ts                    # å…¥å£æ–‡ä»¶
â”œâ”€â”€ manifest.json              # åº”ç”¨é…ç½®
â”œâ”€â”€ pages.json                 # é¡µé¢é…ç½®
â”œâ”€â”€ tsconfig.json              # TypeScripté…ç½®
â””â”€â”€ vite.config.ts             # Viteé…ç½®
```

#### æ­¥éª¤2ï¼šç§»åŠ¨ç«¯ç»„ä»¶å¼€å‘

**ä½¿ç”¨Prompt**: `ç§»åŠ¨ç«¯/ç§»åŠ¨ç«¯ç»„ä»¶å¼€å‘prompt.md`

**è¾“å…¥éœ€æ±‚**: 
```yaml
ç»„ä»¶åç§°: ProductDetail
ç»„ä»¶ç±»å‹: ä¸šåŠ¡ç»„ä»¶
åŠŸèƒ½éœ€æ±‚: 
  - å•†å“å›¾ç‰‡è½®æ’­
  - å•†å“åŸºæœ¬ä¿¡æ¯å±•ç¤º
  - å•†å“è§„æ ¼é€‰æ‹©
  - åŠ å…¥è´­ç‰©è½¦åŠŸèƒ½
  - ç«‹å³è´­ä¹°åŠŸèƒ½
æŠ€æœ¯æ ˆ: uni-app (Vue 3) + TypeScript + uni-ui
```

**AIç”Ÿæˆå•†å“è¯¦æƒ…ç»„ä»¶**: 
```vue
<template>
  <view class="product-detail">
    <!-- å•†å“å›¾ç‰‡è½®æ’­ -->
    <swiper class="product-swiper" indicator-dots circular autoplay>
      <swiper-item v-for="(image, index) in product.images" :key="index">
        <image :src="image" mode="aspectFill" class="swiper-image"></image>
      </swiper-item>
    </swiper>

    <!-- å•†å“åŸºæœ¬ä¿¡æ¯ -->
    <view class="product-info">
      <text class="product-title">{{ product.title }}</text>
      <text class="product-price">Â¥{{ product.price.toFixed(2) }}</text>
      <text class="product-sales">é”€é‡ {{ product.sales }} | åº“å­˜ {{ product.stock }}</text>
    </view>

    <!-- å•†å“è§„æ ¼é€‰æ‹© -->
    <view class="product-specs">
      <text class="specs-title">é€‰æ‹©è§„æ ¼</text>
      <view class="specs-list">
        <view 
          v-for="(spec, index) in product.specs" 
          :key="index"
          class="spec-item"
          :class="{ active: selectedSpec === spec }"
          @click="selectedSpec = spec"
        >
          {{ spec }}
        </view>
      </view>
    </view>

    <!-- å•†å“è¯¦æƒ… -->
    <view class="product-description">
      <text class="description-title">å•†å“è¯¦æƒ…</text>
      <rich-text :nodes="product.description"></rich-text>
    </view>

    <!-- åº•éƒ¨æ“ä½œæ  -->
    <view class="bottom-bar">
      <view class="bar-item" @click="addToCart">
        <text class="bar-icon">ğŸ›’</text>
        <text class="bar-text">åŠ å…¥è´­ç‰©è½¦</text>
      </view>
      <view class="bar-item primary" @click="buyNow">
        <text class="bar-text">ç«‹å³è´­ä¹°</text>
      </view>
    </view>
  </view>
</template>

<script setup lang="ts">
import { ref, onMounted, watch } from 'vue'
import type { Product } from '@/types'
import { useProductStore } from '@/stores/product'
import { useCartStore } from '@/stores/cart'

// Props
interface Props {
  productId: string
}

const props = defineProps<Props>()

// Store
const productStore = useProductStore()
const cartStore = useCartStore()

// State
const product = ref<Product>({
  id: '',
  title: '',
  price: 0,
  sales: 0,
  stock: 0,
  images: [],
  specs: [],
  description: ''
})
const selectedSpec = ref('')
const loading = ref(false)

// Methods
const fetchProductDetail = async () => {
  loading.value = true
  try {
    const result = await productStore.getProductById(props.productId)
    if (result) {
      product.value = result
      // é»˜è®¤é€‰æ‹©ç¬¬ä¸€ä¸ªè§„æ ¼
      if (result.specs.length > 0) {
        selectedSpec.value = result.specs[0]
      }
    }
  } catch (error) {
    uni.showToast({
      title: 'è·å–å•†å“è¯¦æƒ…å¤±è´¥',
      icon: 'none'
    })
  } finally {
    loading.value = false
  }
}

const addToCart = () => {
  if (!selectedSpec.value) {
    uni.showToast({
      title: 'è¯·é€‰æ‹©å•†å“è§„æ ¼',
      icon: 'none'
    })
    return
  }
  
  cartStore.addToCart({
    productId: product.value.id,
    title: product.value.title,
    price: product.value.price,
    spec: selectedSpec.value,
    quantity: 1,
    image: product.value.images[0]
  })
  
  uni.showToast({
    title: 'å·²åŠ å…¥è´­ç‰©è½¦',
    icon: 'success'
  })
}

const buyNow = () => {
  if (!selectedSpec.value) {
    uni.showToast({
      title: 'è¯·é€‰æ‹©å•†å“è§„æ ¼',
      icon: 'none'
    })
    return
  }
  
  // è·³è½¬åˆ°ç¡®è®¤è®¢å•é¡µé¢
  uni.navigateTo({
    url: `/pages/order/confirm?productId=${product.value.id}&spec=${selectedSpec.value}&quantity=1`
  })
}

// Lifecycle
onMounted(() => {
  fetchProductDetail()
})

// Watch
watch(() => props.productId, (newId) => {
  if (newId) {
    fetchProductDetail()
  }
})
</script>

<style scoped lang="scss">
.product-detail {
  min-height: 100vh;
  background-color: #f5f5f5;
}

.product-swiper {
  height: 400rpx;
  width: 100%;
}

.swiper-image {
  width: 100%;
  height: 100%;
}

.product-info {
  padding: 20rpx;
  background-color: #fff;
  margin-bottom: 10rpx;
}

.product-title {
  font-size: 32rpx;
  font-weight: bold;
  color: #333;
  display: block;
  margin-bottom: 10rpx;
  line-height: 1.5;
}

.product-price {
  font-size: 40rpx;
  font-weight: bold;
  color: #ff4d4f;
  display: block;
  margin-bottom: 10rpx;
}

.product-sales {
  font-size: 24rpx;
  color: #999;
  display: block;
}

.product-specs {
  padding: 20rpx;
  background-color: #fff;
  margin-bottom: 10rpx;
}

.specs-title {
  font-size: 28rpx;
  font-weight: bold;
  color: #333;
  display: block;
  margin-bottom: 20rpx;
}

.specs-list {
  display: flex;
  flex-wrap: wrap;
  gap: 20rpx;
}

.spec-item {
  padding: 15rpx 30rpx;
  background-color: #f5f5f5;
  border-radius: 40rpx;
  font-size: 26rpx;
  color: #333;
}

.spec-item.active {
  background-color: #e6f7ff;
  color: #1890ff;
  border: 1rpx solid #1890ff;
}

.product-description {
  padding: 20rpx;
  background-color: #fff;
  margin-bottom: 100rpx; /* ä¸ºåº•éƒ¨æ“ä½œæ ç•™å‡ºç©ºé—´ */
}

.description-title {
  font-size: 28rpx;
  font-weight: bold;
  color: #333;
  display: block;
  margin-bottom: 20rpx;
}

.bottom-bar {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  height: 100rpx;
  background-color: #fff;
  display: flex;
  align-items: center;
  justify-content: space-around;
  box-shadow: 0 -2rpx 10rpx rgba(0, 0, 0, 0.1);
}

.bar-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 0 40rpx;
  height: 100%;
}

.bar-item.primary {
  background-color: #ff4d4f;
  color: #fff;
  width: 300rpx;
  border-radius: 50rpx;
  margin: 20rpx;
  height: 80rpx;
}

.bar-icon {
  font-size: 40rpx;
  margin-bottom: 5rpx;
}

.bar-text {
  font-size: 24rpx;
}
</style>
```

## å¸¸è§é—®é¢˜è§£ç­”

### Q1: å¦‚ä½•é€‰æ‹©åˆé€‚çš„Promptæ¨¡æ¿ï¼Ÿ

**A1**: æ ¹æ®å¼€å‘é˜¶æ®µå’Œéœ€æ±‚ç±»å‹é€‰æ‹©ï¼š
- éœ€æ±‚åˆ†æé˜¶æ®µ â†’ rules/Reviewéœ€æ±‚å®ç°æ£€æŸ¥prompt.md
- æ–°åŠŸèƒ½å¼€å‘ â†’ æŠ€æœ¯æ–¹æ¡ˆ/æ–°å¢ç±»éœ€æ±‚prompt.md
- ç°æœ‰åŠŸèƒ½ä¿®æ”¹ â†’ æŠ€æœ¯æ–¹æ¡ˆ/ä¿®æ”¹ç±»éœ€æ±‚prompt.md
- æ¥å£å¼€å‘ â†’ åº”ç”¨å±‚/æ¥å£*.md
- æ•°æ®åº“å¼€å‘ â†’ æ•°æ®å±‚/å»ºè¡¨prompt.md
- å‰ç«¯å¼€å‘ â†’ å‰ç«¯/å‰ç«¯*.md
- ç§»åŠ¨ç«¯å¼€å‘ â†’ ç§»åŠ¨ç«¯/ç§»åŠ¨ç«¯*.md

### Q2: Promptå‚æ•°å¦‚ä½•é…ç½®ï¼Ÿ

**A2**: æ ¹æ®é¡¹ç›®ç±»å‹åœ¨é…ç½®æ–‡ä»¶ä¸­è®¾ç½®ï¼š

```yaml
# å‰ç«¯é¡¹ç›®é…ç½®
# vite.config.ts
import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'

export default defineConfig({
  plugins: [vue()],
  resolve: {
    alias: {
      '@': '/src'
    }
  }
})

# ç§»åŠ¨ç«¯é¡¹ç›®é…ç½®
# pages.json
{
  "pages": [
    {
      "path": "pages/index/index",
      "style": {
        "navigationBarTitleText": "é¦–é¡µ"
      }
    }
  ],
  "globalStyle": {
    "navigationBarBackgroundColor": "#fff",
    "navigationBarTextStyle": "black"
  }
}
```

### Q3: å¦‚ä½•å¤„ç†Promptç”Ÿæˆçš„ä»£ç ä¸ç¬¦åˆé¡¹ç›®è§„èŒƒçš„æƒ…å†µï¼Ÿ

**A3**: 
1. æ£€æŸ¥Promptå‚æ•°é…ç½®æ˜¯å¦æ­£ç¡®
2. åœ¨é¡¹ç›®ç‰¹å®šPromptä¸­æ·»åŠ è‡ªå®šä¹‰è§„åˆ™
3. ä½¿ç”¨ä»£ç å®¡æŸ¥å·¥å…·è¿›è¡ŒäºŒæ¬¡æ£€æŸ¥
4. æŒç»­ä¼˜åŒ–Promptæ¨¡æ¿

### Q4: å¦‚ä½•è¯„ä¼°Promptä½¿ç”¨æ•ˆæœï¼Ÿ

**A4**: 
- **é‡åŒ–æŒ‡æ ‡**: AIç¼–ç é‡‡çº³ç‡ã€ä»£ç è´¨é‡æŒ‡æ ‡ã€å¼€å‘æ•ˆç‡æå‡
- **å®šæ€§è¯„ä¼°**: å›¢é˜Ÿåé¦ˆã€ä»£ç å¯ç»´æŠ¤æ€§ã€é¡¹ç›®ä¸€è‡´æ€§
- **æŒç»­ç›‘æ§**: å®šæœŸæ”¶é›†ä½¿ç”¨æ•°æ®å’Œåé¦ˆå»ºè®®

## æœ€ä½³å®è·µæ€»ç»“

### 1. æ¸è¿›å¼é‡‡ç”¨
- ä»ç®€å•åŠŸèƒ½å¼€å§‹è¯•ç”¨
- é€æ­¥æ‰©å±•åˆ°å¤æ‚ä¸šåŠ¡åœºæ™¯
- æŒç»­ä¼˜åŒ–å’Œè°ƒæ•´Prompté…ç½®

### 2. å›¢é˜Ÿåä½œ
- å»ºç«‹å›¢é˜Ÿå…±äº«çš„Promptåº“
- å®šæœŸè¿›è¡Œä½¿ç”¨ç»éªŒåˆ†äº«
- å»ºç«‹åé¦ˆå’Œæ”¹è¿›æœºåˆ¶

### 3. è´¨é‡ä¿è¯
- å»ºç«‹ä»£ç å®¡æŸ¥æµç¨‹
- ä½¿ç”¨è‡ªåŠ¨åŒ–æµ‹è¯•éªŒè¯
- æŒç»­ç›‘æ§ä»£ç è´¨é‡æŒ‡æ ‡

### 4. çŸ¥è¯†æ²‰æ·€
- è®°å½•ä½¿ç”¨ç»éªŒå’Œæœ€ä½³å®è·µ
- å»ºç«‹é¡¹ç›®ç‰¹å®šçš„Promptæ¨¡æ¿
- å½¢æˆå›¢é˜ŸçŸ¥è¯†åº“

### 5. è·¨å¹³å°å¼€å‘æ³¨æ„äº‹é¡¹
- ä¼˜å…ˆä½¿ç”¨è·¨å¹³å°API
- åˆç†ä½¿ç”¨æ¡ä»¶ç¼–è¯‘
- è€ƒè™‘ä¸åŒå¹³å°çš„æ€§èƒ½å·®å¼‚
- æµ‹è¯•è¦†ç›–æ‰€æœ‰ç›®æ ‡å¹³å°

é€šè¿‡ä»¥ä¸Šç¤ºä¾‹å’Œå®è·µï¼Œæ‚¨å¯ä»¥å¿«é€ŸæŒæ¡AIç¼–ç æç¤ºè¯å·¥ç¨‹çš„ä½¿ç”¨æ–¹æ³•ï¼Œå¹¶åœ¨å®é™…é¡¹ç›®ä¸­å‘æŒ¥å…¶æœ€å¤§ä»·å€¼ã€‚